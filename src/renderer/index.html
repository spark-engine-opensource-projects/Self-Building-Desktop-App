<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dynamic Application Builder</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                <svg id="sunIcon" viewBox="0 0 24 24">
                    <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65z"/>
                </svg>
                <svg id="moonIcon" viewBox="0 0 24 24" style="display: none;">
                    <path d="M17.75 4.09L15.22 6.03L16.13 9.09L13.5 7.28L10.87 9.09L11.78 6.03L9.25 4.09L12.44 4L13.5 1L14.56 4L17.75 4.09M21.25 11L19.61 12.25L20.2 14.23L18.5 13.06L16.8 14.23L17.39 12.25L15.75 11L17.81 10.95L18.5 9L19.19 10.95L21.25 11M18.97 15.95C19.8 15.87 20.69 17.05 20.16 17.8C19.84 18.25 19.5 18.67 19.08 19.07C15.17 23 8.84 23 4.94 19.07C1.03 15.17 1.03 8.83 4.94 4.93C5.34 4.53 5.76 4.17 6.21 3.85C6.96 3.32 8.14 4.21 8.06 5.04C7.79 7.9 8.75 10.87 10.95 13.06C13.14 15.26 16.1 16.22 18.97 15.95Z"/>
                </svg>
            </button>
            <h1>ü§ñ AI Dynamic Application Builder</h1>
            <p>Powered by Claude - Generate and execute code from natural language</p>
        </header>

        <!-- API Key Configuration -->
        <section class="api-config" id="apiConfig">
            <div class="config-header">
                <h2>üîë Anthropic API Configuration</h2>
                <span class="status" id="apiStatus">Not Configured</span>
            </div>
            <div class="config-content">
                <div class="input-group">
                    <input type="password" id="apiKeyInput" placeholder="Enter your Anthropic API key">
                    <button id="setApiKeyBtn" class="btn btn-primary">Set API Key</button>
                    <button id="loadApiKeyBtn" class="btn btn-secondary">Load from File</button>
                </div>
                <p class="help-text">
                    Get your API key from <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a>
                </p>
            </div>
        </section>

        <!-- Code Generation -->
        <section class="code-generation" id="codeGeneration" style="display: none;">
            <h2>üí° Describe Your Application</h2>
            <div class="input-group">
                <textarea id="promptInput" placeholder="Describe what you want to build... 

Examples:
‚Ä¢ Create a simple web server that serves Hello World
‚Ä¢ Build a function that calculates fibonacci numbers
‚Ä¢ Make a script that fetches weather data from an API
‚Ä¢ Create a data visualization using Chart.js"></textarea>
                <button id="generateBtn" class="btn btn-primary">
                    <span class="btn-text">Generate Code</span>
                    <div class="spinner" style="display: none;"></div>
                </button>
            </div>
        </section>

        <!-- Generated Code Display -->
        <section class="code-display" id="codeDisplay" style="display: none;">
            <div class="code-header">
                <h2>üìã Generated Code</h2>
                <div class="code-actions">
                    <button id="executeBtn" class="btn btn-success">‚ñ∂Ô∏è Execute</button>
                    <button id="clearBtn" class="btn btn-secondary">üóëÔ∏è Clear</button>
                </div>
            </div>
            
            <div class="code-info">
                <div class="info-item">
                    <strong>Description:</strong>
                    <span id="codeDescription">-</span>
                </div>
                <div class="info-item">
                    <strong>Packages:</strong>
                    <span id="codePackages">None</span>
                </div>
            </div>

            <div class="code-container">
                <pre><code id="generatedCode"></code></pre>
            </div>
        </section>

        <!-- Execution Results -->
        <section class="execution-results" id="executionResults" style="display: none;">
            <h2>üöÄ Execution Results</h2>
            <div class="results-container">
                <div class="output-section">
                    <h3>Output</h3>
                    <pre id="executionOutput" class="output-content"></pre>
                </div>
                <div class="error-section" id="errorSection" style="display: none;">
                    <h3>Errors/Warnings</h3>
                    <pre id="executionErrors" class="error-content"></pre>
                </div>
            </div>
            <!-- Execution root for generated content -->
            <div id="execution-root" style="margin-top: 20px; padding: 20px; border: 2px dashed #e2e8f0; border-radius: 8px; background: #f8fafc;">
                <!-- Generated UI components will appear here -->
            </div>
        </section>

        <!-- Session Info -->
        <footer class="session-info">
            <span>Session: <code id="sessionId">Not started</code></span>
            <button id="newSessionBtn" class="btn btn-outline">New Session</button>
        </footer>
    </div>

    <script src="../utils/secureDOMExecutor.js"></script>
    <script src="renderer.js"></script>
</body>
</html>